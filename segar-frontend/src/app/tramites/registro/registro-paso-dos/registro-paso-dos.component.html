<div class="max-w-4xl mx-auto">
  <h2 class="text-2xl font-bold text-gray-800 mb-4">Información Preparatoria: Registro en Plataforma INVIMA</h2>

    <nav class="tabs" role="tablist">
      <button
        class="tab"
        [ngClass]="{'tab-active': activeTab === 'registro'}"
        (click)="setActiveTab('registro')"
        [attr.aria-selected]="activeTab === 'registro'"
        role="tab">
        Registro de Usuario
      </button>
      <button
        class="tab"
        [ngClass]="{'tab-active': activeTab === 'tarifas'}"
        (click)="setActiveTab('tarifas')"
        [attr.aria-selected]="activeTab === 'tarifas'"
        role="tab">
        Consulta de Tarifas
      </button>
      <button
        class="tab"
        [ngClass]="{'tab-active': activeTab === 'documentos'}"
        (click)="setActiveTab('documentos')"
        [attr.aria-selected]="activeTab === 'documentos'"
        role="tab">
        Preparación de Documentos
      </button>
      <button
        class="tab"
        [ngClass]="{'tab-active': activeTab === 'verificacion'}"
        (click)="setActiveTab('verificacion')"
        [attr.aria-selected]="activeTab === 'verificacion'"
        role="tab">
        Verificación
      </button>
    </nav>

    <!-- REGISTRO DE USUARIO -->
    <div class="tab-content" *ngIf="activeTab === 'registro'" role="tabpanel">
      <div class="section-card">
        <h3 class="text-xl font-semibold mb-4 text-gray-800">Registro en la Plataforma INVIMA</h3>

        <!-- Paso 1 -->
        <section class="mb-6">
          <div class="flex items-center mb-2">
            <span class="text-lg font-bold text-blue-600 mr-2" aria-hidden="true">1</span>
            <h4 class="text-lg font-semibold text-gray-800">Acceda al sitio web oficial del INVIMA</h4>
          </div>
          <p class="text-gray-700 mb-2">
            Visite <a href="https://www.invima.gov.co" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">www.invima.gov.co</a> y busque la sección "Trámites y Servicios".
          </p>
        </section>

        <!-- Paso 2 -->
        <section class="mb-6">
          <div class="flex items-center mb-2">
            <span class="text-lg font-bold text-blue-600 mr-2" aria-hidden="true">2</span>
            <h4 class="text-lg font-semibold text-gray-800">Cree una cuenta en el sistema</h4>
          </div>
          <p class="text-gray-700 mb-2">
            Busque la opción "Registrarse" o "Crear cuenta" y complete el formulario con la información de su empresa.
          </p>
          <p class="text-gray-700 mb-2 font-medium">Información requerida para el registro:</p>
          <ul class="list-disc pl-6 space-y-1 text-gray-700 mb-4">
            <li>NIT de la empresa y razón social</li>
            <li>Datos del representante legal</li>
            <li>Dirección de la empresa y datos de contacto</li>
            <li>Correo electrónico corporativo</li>
          </ul>
        </section>

        <!-- Paso 3 -->
        <section class="mb-6">
          <div class="flex items-center mb-2">
            <span class="text-lg font-bold text-blue-600 mr-2" aria-hidden="true">3</span>
            <h4 class="text-lg font-semibold text-gray-800">Verifique su correo electrónico</h4>
          </div>
          <p class="text-gray-700">
            El INVIMA enviará un correo de verificación para activar su cuenta. Siga las instrucciones del correo para completar el proceso.
          </p>
          <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mt-2 text-sm text-yellow-800">
            <div class="flex items-start">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 mt-0.5 flex-shrink-0 text-yellow-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z" />
              </svg>
              <p><strong>Importante:</strong> Revise su carpeta de spam si no encuentra el correo de verificación en su bandeja de entrada.</p>
            </div>
          </div>
        </section>

        <!-- Paso 4 -->
        <section class="mb-6">
          <div class="flex items-center mb-2">
            <span class="text-lg font-bold text-blue-600 mr-2" aria-hidden="true">4</span>
            <h4 class="text-lg font-semibold text-gray-800">Inicie sesión en el sistema</h4>
          </div>
          <p class="text-gray-700">
            Una vez activada su cuenta, inicie sesión con sus credenciales para acceder a los servicios de trámites en línea.
          </p>
          <div class="bg-green-50 border-l-4 border-green-400 p-4 mt-2 text-sm text-green-800">
            <div class="flex items-start">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 mt-0.5 flex-shrink-0 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              <p><strong>Consejo:</strong> Guarde sus credenciales en un lugar seguro y no las comparta con personas no autorizadas.</p>
            </div>
          </div>
        </section>
      </div>
    </div>

    <!-- CONSULTA DE TARIFAS -->
    <div class="tab-content" *ngIf="activeTab === 'tarifas'" role="tabpanel">
      <div class="section-card">
        <h3 class="text-xl font-semibold mb-4 text-gray-800">Consulta de Tarifas INVIMA</h3>

        <p class="text-gray-700 mb-4">¿Cómo consultar las tarifas vigentes? Siga estos pasos:</p>

        <ol class="list-decimal pl-6 space-y-2 text-gray-700 mb-6">
          <li>Visite el sitio web oficial del INVIMA: <a href="https://www.invima.gov.co" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">www.invima.gov.co</a></li>
          <li>Busque la sección "Trámites y Servicios" o "Tarifas"</li>
          <li>Descargue el manual tarifario vigente (actualizado anualmente)</li>
          <li>Identifique el código del trámite que necesita realizar</li>
        </ol>

        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded mb-6 text-sm text-yellow-800">
          <p><strong>Recuerde:</strong> El pago de la tarifa es requisito indispensable para iniciar cualquier trámite. Conserve el comprobante de pago para adjuntarlo a su solicitud.</p>
        </div>
      </div>
    </div>

    <!-- PREPARACIÓN DE DOCUMENTOS -->
    <div class="tab-content" *ngIf="activeTab === 'documentos'" role="tabpanel">
      <div class="section-card">
        <h3 class="text-xl font-semibold mb-4 text-gray-800">Preparación de Documentos</h3>
        
        <!-- Información importante -->
        <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 text-sm text-blue-700">
          <div class="flex items-start">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 mt-0.5 flex-shrink-0 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <div>
              <p class="font-medium mb-1">La correcta preparación de los documentos es fundamental para evitar rechazos y agilizar el proceso de aprobación.</p>
              <p>Todos los documentos deben estar en formatos PDF y debidamente firmados cuando corresponda.</p>
            </div>
          </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
          <!-- Documentos Legales -->
          <div class="bg-white border border-gray-200 rounded-lg p-6 shadow-sm">
            <div class="flex items-center mb-4">
              <div class="bg-blue-100 rounded-full p-2 mr-3">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
              </div>
              <h4 class="text-lg font-semibold text-gray-800">Documentos Legales</h4>
            </div>
            
            <div class="space-y-3">
              <div class="flex items-start space-x-3">
                <div class="w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"></div>
                <div>
                  <p class="font-medium text-gray-800">Certificado de existencia y representación legal</p>
                  <p class="text-sm text-gray-600">(vigencia máxima de 3 meses)</p>
                </div>
              </div>
              
              <div class="flex items-start space-x-3">
                <div class="w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"></div>
                <div>
                  <p class="font-medium text-gray-800">Poder debidamente otorgado</p>
                  <p class="text-sm text-gray-600">(si acta mediante apoderado)</p>
                </div>
              </div>
              
              <div class="flex items-start space-x-3">
                <div class="w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"></div>
                <div>
                  <p class="font-medium text-gray-800">Certificado de venta libre</p>
                  <p class="text-sm text-gray-600">(para productos importados)</p>
                </div>
              </div>
              
              <div class="flex items-start space-x-3">
                <div class="w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"></div>
                <div>
                  <p class="font-medium text-gray-800">Comprobante de pago de la tarifa correspondiente</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Documentos Técnicos -->
          <div class="bg-white border border-gray-200 rounded-lg p-6 shadow-sm">
            <div class="flex items-center mb-4">
              <div class="bg-blue-100 rounded-full p-2 mr-3">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" />
                </svg>
              </div>
              <h4 class="text-lg font-semibold text-gray-800">Documentos Técnicos</h4>
            </div>
            
            <div class="space-y-3">
              <div class="flex items-start space-x-3">
                <div class="w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"></div>
                <div>
                  <p class="font-medium text-gray-800">Ficha técnica completa del producto</p>
                </div>
              </div>
              
              <div class="flex items-start space-x-3">
                <div class="w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"></div>
                <div>
                  <p class="font-medium text-gray-800">Composición cualitativa y cuantitativa</p>
                </div>
              </div>
              
              <div class="flex items-start space-x-3">
                <div class="w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"></div>
                <div>
                  <p class="font-medium text-gray-800">Descripción del proceso de fabricación</p>
                </div>
              </div>
              
              <div class="flex items-start space-x-3">
                <div class="w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"></div>
                <div>
                  <p class="font-medium text-gray-800">Especificaciones fisicoquímicas y microbiológicas</p>
                </div>
              </div>
              
              <div class="flex items-start space-x-3">
                <div class="w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"></div>
                <div>
                  <p class="font-medium text-gray-800">Certificado de análisis del producto terminado</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Información de Etiquetado -->
        <div class="bg-white border border-gray-200 rounded-lg p-6 shadow-sm mb-8">
          <div class="flex items-center mb-4">
            <div class="bg-blue-100 rounded-full p-2 mr-3">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />
              </svg>
            </div>
            <h4 class="text-lg font-semibold text-gray-800">Información de Etiquetado</h4>
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="flex items-start space-x-3">
              <div class="w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"></div>
              <div>
                <p class="font-medium text-gray-800">Proyecto de etiquetas o rótulos en español</p>
              </div>
            </div>
            
            <div class="flex items-start space-x-3">
              <div class="w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"></div>
              <div>
                <p class="font-medium text-gray-800">Información nutricional según Resolución 333 de 2011</p>
              </div>
            </div>
            
            <div class="flex items-start space-x-3">
              <div class="w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"></div>
              <div>
                <p class="font-medium text-gray-800">Etiquetas originales para productos importados</p>
              </div>
            </div>
            
            <div class="flex items-start space-x-3">
              <div class="w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"></div>
              <div>
                <p class="font-medium text-gray-800">Declaraciones de propiedades nutricionales o de salud (si aplica)</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Consejo importante -->
        <div class="bg-green-50 border-l-4 border-green-400 p-4 text-sm text-green-800">
          <div class="flex items-start">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 mt-0.5 flex-shrink-0 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <div>
              <p class="font-medium mb-1"><strong>Consejo:</strong> Organice todos los documentos en carpetas digitales separadas</p>
              <p>Verifique que todos los archivos PDF sean legibles y estén correctamente identificados antes de subirlos a la plataforma.</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- VERIFICACIÓN -->
    <div class="tab-content" *ngIf="activeTab === 'verificacion'" role="tabpanel">
      <div class="section-card">
        <h3 class="text-xl font-semibold text-gray-800 mb-4">Verificación de Registro INVIMA</h3>
        <p class="text-gray-700 mb-4">
          Para continuar con el proceso, necesitamos verificar que ha completado correctamente el registro en la plataforma INVIMA. Por favor, adjunte el correo de confirmación que recibió del INVIMA después de activar su cuenta.
        </p>

        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6 text-sm text-yellow-800">
          <div class="flex items-start">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 mt-0.5 flex-shrink-0 text-yellow-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z" />
            </svg>
            <p><strong>Importante:</strong> La verificación de este paso es necesaria para continuar con el proceso de trámite. Si tiene problemas para encontrar el correo de confirmación, puede contactar al soporte técnico del INVIMA.</p>
          </div>
        </div>

        <div class="verification-box mb-6 p-6 rounded-lg border-2 border-dashed border-blue-500 bg-blue-50">
          <div *ngIf="!uploading && !success" class="text-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto text-blue-500 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
            </svg>
            <h4 class="text-lg font-medium text-gray-800 mb-2">Adjunte el correo de confirmación del INVIMA</h4>
            <p class="text-gray-600 mb-4">Formatos aceptados: PDF, JPG, PNG (máx. 5MB)</p>

            <input
              type="file"
              (change)="onFileSelected($event)"
              class="hidden"
              #fileInput
              accept=".pdf,.jpg,.jpeg,.png">
            <button
              (click)="fileInput.click()"
              class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">
              Seleccionar archivo
            </button>
          </div>

          <div *ngIf="uploading" class="mt-4 text-center">
            <p class="text-lg font-medium text-gray-800 mb-2">Subiendo archivo...</p>
            <div class="progress-bar mt-2">
              <div
                class="progress-fill"
                [style.width.%]="uploadProgress"
                [attr.aria-valuenow]="uploadProgress"
                aria-valuemin="0"
                aria-valuemax="100"
                role="progressbar"></div>
            </div>
          </div>

          <div *ngIf="success" class="mt-4 text-center">
            <div class="checkmark-circle show mx-auto mb-4">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
              </svg>
            </div>
            <h4 class="text-lg font-medium text-green-700 mb-2">¡Verificación completada!</h4>
            <p class="text-gray-600 mb-4">El correo de confirmación ha sido verificado correctamente.</p>

            <button class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700">Continuar al siguiente paso</button>
          </div>

          <div *ngIf="alternativeVerification" class="mt-4 text-center text-yellow-700">
            <p class="mb-2">Adjunte una captura de pantalla de su panel de usuario en el INVIMA para verificar su cuenta.</p>
          </div>

          <div class="mt-4 text-center">
            <button
              (click)="triggerAlternativeVerification()"
              class="text-blue-600 hover:underline text-sm">
              ¿No tiene el correo de confirmación? Verificar mediante captura de pantalla del panel de usuario
            </button>
          </div>
        </div>

        <div class="step-card bg-white p-6 border border-gray-200 mb-6">
          <div class="flex items-center mb-4">
            <div class="bg-blue-100 rounded-full p-3 mr-4">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
            <h4 class="text-lg font-medium text-gray-800">¿Cómo encontrar el correo de confirmación?</h4>
          </div>

          <ol class="space-y-3 text-gray-600">
            <li class="flex items-start">
              <span class="bg-blue-100 text-blue-600 rounded-full w-6 h-6 flex items-center justify-center font-semibold mr-2" aria-hidden="true">1</span>
              <div>Revise su bandeja de entrada con el asunto "Confirmación de registro - INVIMA"</div>
            </li>
            <li class="flex items-start">
              <span class="bg-blue-100 text-blue-600 rounded-full w-6 h-6 flex items-center justify-center font-semibold mr-2" aria-hidden="true">2</span>
              <div>Verifique las carpetas de spam o correo no deseado</div>
            </li>
            <li class="flex items-start">
              <span class="bg-blue-100 text-blue-600 rounded-full w-6 h-6 flex items-center justify-center font-semibold mr-2" aria-hidden="true">3</span>
              <div>Busque correos del remitente "notificaciones&#64;invima.gov.co"</div>
            </li>
            <li class="flex items-start">
              <span class="bg-blue-100 text-blue-600 rounded-full w-6 h-6 flex items-center justify-center font-semibold mr-2" aria-hidden="true">4</span>
              <div>Si no lo encuentra, puede adjuntar una captura de pantalla de su panel de usuario en la plataforma INVIMA que muestre su cuenta activa</div>
            </li>
          </ol>
        </div>
      </div>
    </div>
  </div>

  <!-- Navigation -->
  <div class="step-navigation">
    <div class="step-indicator">
      Información Preparatoria
    </div>
    <div class="flex gap-3">
      <a routerLink="/main/nuevo/info/evaluacion" class="nav-btn nav-btn-secondary">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
        Ver: Evaluación Inicial
      </a>
      <a routerLink="/main/nuevo" class="nav-btn nav-btn-primary">
        Volver a Nuevo Trámite
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
      </a>
    </div>
  </div>
